"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2612],{1189:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(2791),o=a(6770),n=a.n(o),l=(a(6009),a(1648)),r=a(1305);const i="add-post_container__PvE5M",d="add-post_modalContent__B+f9z",c="add-post_formGroup__D3lpf",u="add-post_imagePreviewContainer__EAw0k",h="add-post_imagePreview__8EDAe",v="add-post_submitButtonContainer__bGNDT",g="add-post_submitButton__YMmpr",p="add-post_title__Ogy2v",m="add-post_label__3J6cJ",_="add-post_select__fsBDG";var y=a(9085),j=a(7689),f=a(1975),A=a(5648),x=a(9656),T=a(184);const b=()=>{var e;const{user:t}=(0,r.CG)((e=>e.auth)),[a,o]=(0,s.useState)([]),[b,C]=(0,s.useState)(""),[N,E]=(0,s.useState)(""),[w,D]=(0,s.useState)(null),[S,k]=(0,s.useState)(null),[F,P]=(0,s.useState)((null===(e=a[0])||void 0===e?void 0:e._id)||""),G=(0,r.TL)(),O=(0,j.s0)();(0,s.useEffect)((()=>{G((0,A.T2)()).then((e=>{const{payload:t}=e;if(t){const e=t;console.log(e),o(e),P(e[0]._id)}}))}),[]);return(0,T.jsx)(l.Z,{children:(0,T.jsx)("div",{className:i,children:(0,T.jsxs)("div",{className:d,children:[(0,T.jsx)("h2",{className:p,children:"Add New Post"}),(0,T.jsxs)("div",{className:c,children:[(0,T.jsx)("label",{htmlFor:"category",className:m,children:"Category"}),(0,T.jsx)("select",{id:"category",value:F,onChange:e=>P(e.target.value),className:_,children:a.map((e=>(0,T.jsx)("option",{value:e._id,children:e.name},e._id)))})]}),(0,T.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;a.append("title",b),a.append("content",N),a.append("categoryId",F),w&&a.append("postImage",w);try{(await fetch(x.F.posts.ADD_POST,{method:"POST",body:a,headers:{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.accessToken)}})).ok?(y.Am.success("Post added successfully"),O(f.Hb.ADMIN.POSTS)):console.error("Failed to add post")}catch(s){console.error("Error:",s)}},encType:"multipart/form-data",children:[(0,T.jsxs)("div",{className:c,children:[(0,T.jsx)("label",{htmlFor:"title",className:m,children:"Title"}),(0,T.jsx)("input",{type:"text",id:"title",value:b,onChange:e=>C(e.target.value),required:!0})]}),(0,T.jsxs)("div",{className:c,children:[(0,T.jsx)("label",{htmlFor:"content",className:m,children:"Content"}),(0,T.jsx)(n(),{value:N,onChange:E,theme:"snow",modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]]}})]}),(0,T.jsxs)("div",{className:c,children:[(0,T.jsx)("label",{htmlFor:"image",className:m,children:"Image"}),(0,T.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:e=>{if(e.target.files){const t=e.target.files[0];D(t);const a=new FileReader;a.onloadend=()=>{k(a.result)},a.readAsDataURL(t)}}})]}),(0,T.jsx)("div",{className:u,children:S&&(0,T.jsx)("img",{src:S,alt:"Preview",className:h,crossOrigin:"anonymous"})}),(0,T.jsx)("div",{className:v,children:(0,T.jsx)("button",{type:"submit",className:g,children:"Add Post"})})]})]})})})}},5648:(e,t,a)=>{a.d(t,{T2:()=>i});var s=a(6382),o=a(9656),n=a(4680),l=a(9085),r=a(460);(0,s.hg)("categories/add-category",(async(e,t)=>{let{rejectWithValue:a,dispatch:s}=t;s((0,n.Av)());try{var l;const t=await r.Z.post(o.F.categories.ADD_CATEGORY,e.formData,{headers:{Authorization:"Bearer ".concat(e.token)}});return null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message}catch(i){return a(i)}finally{s((0,n.Vg)())}}));const i=(0,s.hg)("categories/categories",(async(e,t)=>{const{rejectWithValue:a,dispatch:s}=t;s((0,n.Av)());try{var l;const e=await r.Z.get(o.F.categories.GET_CATEGORIES);return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.result}catch(i){return null!==i&&void 0!==i&&i.message?a(null===i||void 0===i?void 0:i.message):a(i)}finally{s((0,n.Vg)())}}));(0,s.hg)("categories/category-posts",(async(e,t)=>{const{rejectWithValue:a,dispatch:s}=t;s((0,n.Av)());try{const t=await r.Z.get(o.F.categories.GET_CATEGORY_POSTS(null===e||void 0===e?void 0:e.id));return null===t||void 0===t?void 0:t.data}catch(l){return a(l)}finally{s((0,n.Vg)())}})),(0,s.hg)("categories/update-category",(async(e,t)=>{const{rejectWithValue:a,dispatch:s}=t;s((0,n.Av)());try{var i;const t=await r.Z.patch(o.F.categories.UPDATE_CATEGORY(null===e||void 0===e?void 0:e.id),e.content,{headers:{Authorization:"Bearer ".concat(e.token)}});return l.Am.success("Category Updated!"),null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.result}catch(d){return d.response&&d.response.data?a(d.response.data):a(d)}finally{s((0,n.Vg)())}})),(0,s.hg)("categories/delete-category",(async(e,t)=>{const{rejectWithValue:a,dispatch:s}=t;s((0,n.Av)());try{var i;const t=await r.Z.delete(o.F.categories.DELETE_CATEGORY(null===e||void 0===e?void 0:e.id),{headers:{Authorization:"Bearer ".concat(e.token)}});return l.Am.success("Category Deleted!"),null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.result}catch(d){return d.response&&d.response.data?a(d.response.data):a(d)}finally{s((0,n.Vg)())}}))},830:()=>{}}]);
//# sourceMappingURL=2612.adfc7db6.chunk.js.map