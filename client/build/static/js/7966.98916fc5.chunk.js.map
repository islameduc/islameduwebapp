{"version":3,"file":"static/js/7966.98916fc5.chunk.js","mappings":"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","sources":["webpack://client/./src/components/admin/KandbanLoading/KanbanLoading.module.css?e88b","components/admin/KandbanLoading/KanbanLoading.component.tsx","webpack://client/./src/components/donation-table/donation-table.module.css?d2ed","components/donation-table/DonationTable.tsx","webpack://client/./src/components/shared/pagination/pagination.module.css?d5e9","components/shared/pagination/Pagination.tsx","pages/admin/donations/Donations.page.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"KanbanLoading_container__5QdVb\",\"content\":\"KanbanLoading_content__fi5xO\",\"close\":\"KanbanLoading_close__Qn-VV\"};","import React, { ChangeEvent, ReactNode } from 'react';\nimport classes from './KanbanLoading.module.css';\n\ninterface IProps {\n  kanbanLoading?: boolean;\n  children?: ReactNode | any;\n  contentStyle?: object;\n  containerStyle?: object;\n}\n\nconst KanbanLoading = ({ kanbanLoading, children, contentStyle, containerStyle }: IProps) => {\n  return (\n    <>\n      {kanbanLoading && (\n        <div className={classes.container} style={containerStyle}>\n          <div className={classes.content} style={contentStyle}>\n            {children}\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default KanbanLoading;\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"donation-table_table__AhxEn\"};","import React from 'react';\nimport styles from './donation-table.module.css';\n\ninterface Donation {\n  donatedBy: string;\n  donatedAmount: number;\n  receivedAmount: number;\n  purpose: string;\n  isTransaction: boolean;\n  engagedAmount: number;\n}\n\ninterface DonationTableProps {\n  donations: Donation[];\n  allDonations: Donation[];\n}\n\nconst DonationTable: React.FC<DonationTableProps> = ({ donations, allDonations }) => {\n  return (\n    <table className={styles.table}>\n      <thead>\n        <tr>\n          <th style={{ width: '15%' }}>Donated By</th>\n          <th style={{ width: '15%' }}>Donated Amount</th>\n          <th style={{ width: '15%' }}>Authorized Amount</th>\n          <th style={{ width: '15%' }}>Engaged Amount</th>\n          <th style={{ width: '40%' }}>Purpose</th>\n        </tr>\n      </thead>\n      <tbody>\n        {donations &&\n          donations.map((donation, index) => (\n            <tr\n              key={index}\n              style={\n                donation.isTransaction\n                  ? { borderBottom: '1px solid #ccc', color: 'red' }\n                  : { borderBottom: '1px solid #ccc' }\n              }\n            >\n              <td style={{ width: '15%' }}>{donation.donatedBy}</td>\n              <td style={{ width: '15%' }}>\n                {donation.isTransaction ? '' : `${donation.donatedAmount} FCFA`}\n              </td>\n              <td style={{ width: '15%' }}>\n                {donation.isTransaction ? '' : `${donation.receivedAmount} FCFA`}\n              </td>\n              <td style={{ width: '15%' }}>\n                {donation.isTransaction ? `${donation.engagedAmount} FCFA` : ''}\n              </td>\n              <td style={{ width: '40%' }}>{donation.purpose}</td>\n            </tr>\n          ))}\n        <tr style={{ borderBottom: '1px solid #ccc' }}>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr style={{ borderBottom: '1px solid #ccc' }}>\n          <td style={{ width: '15%' }}>Total</td>\n          <td style={{ width: '15%' }}>\n            {allDonations &&\n              allDonations.reduce((total, donation) => total + donation.donatedAmount, 0)}{' '}\n            FCFA\n          </td>\n          <td style={{ width: '15%' }}>\n            {allDonations &&\n              allDonations.reduce((total, donation) => total + donation.receivedAmount, 0)}{' '}\n            FCFA\n          </td>\n          <td style={{ width: '15%' }}>\n            {allDonations &&\n              allDonations.reduce((total, donation) => total + donation.engagedAmount, 0)}{' '}\n            FCFA\n          </td>\n          <td style={{ width: '40%' }}></td>\n        </tr>\n      </tbody>\n    </table>\n  );\n};\n\nexport default DonationTable;\n","// extracted by mini-css-extract-plugin\nexport default {\"paginationContainer\":\"pagination_paginationContainer__cwrdh\",\"paginationButton\":\"pagination_paginationButton__9Nk9a\",\"paginationText\":\"pagination_paginationText__aVVMh\"};","import React, { useState } from 'react';\nimport styles from './pagination.module.css';\n\ninterface PaginationProps {\n  totalPages: number;\n  onPageChange: (pageNumber: number) => void;\n}\n\nconst Pagination: React.FC<PaginationProps> = ({ totalPages, onPageChange }) => {\n  const [currentPage, setCurrentPage] = useState<number>(1);\n\n  const goToPreviousPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage((prevPage) => prevPage - 1);\n      onPageChange(currentPage - 1);\n    }\n  };\n\n  const goToNextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage((prevPage) => prevPage + 1);\n      onPageChange(currentPage + 1);\n    }\n  };\n\n  return (\n    <div className={styles.paginationContainer}>\n      {currentPage > 1 && (\n        <button onClick={goToPreviousPage} className={styles.paginationButton}>\n          Previous\n        </button>\n      )}\n      <span className={styles.paginationText}>\n        Page {currentPage} of {totalPages}\n      </span>\n      {currentPage < totalPages && (\n        <button onClick={goToNextPage} className={styles.paginationButton}>\n          Next\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default Pagination;\n","import React, { useEffect, useState } from 'react';\n\nimport AdminLayout from '../../../layouts/Admin.layout';\nimport styles from './donations.module.css';\nimport { useAppDispatch, useAppSelector } from '../../../store';\nimport KanbanLoading from '../../../components/admin/KandbanLoading/KanbanLoading.component';\nimport Spinner from '../../../components/loaders/spinner/Spinner';\nimport NoData from '../../../components/admin/no-data/NoData.component';\nimport DonationCard from '../../../components/admin/donation-card/DonationCard.component';\nimport DonationTable from '../../../components/donation-table/DonationTable';\nimport { getDonationsAction } from '../../../store/features/slices/donations/donations.action';\nimport { paths } from '../../../routers/paths';\nimport { useNavigate } from 'react-router-dom';\nimport { endpoint } from '../../../api/config';\nimport Pagination from '../../../components/shared/pagination/Pagination';\n\nconst Donations = () => {\n  const { loading } = useAppSelector((state) => state.loader);\n  const { donations } = useAppSelector((state) => state.donations);\n  const [allDonations, setAllDonations] = useState<any>(donations?.data);\n  const [activeDonations, setActiveDonations] = useState<any>();\n  const [page, setPage] = useState(1);\n  const [value, setValue] = useState('');\n  const [balance, setBalance] = useState(0);\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const REFILL_FRACTION = 100 / 104;\n  const ELEMENTS_PER_PAGE = 10;\n\n  const getAllDonations = () => {\n    dispatch(getDonationsAction()).then((res: any) => {\n      const { payload } = res;\n      if (payload) {\n        const fetchedDonations = payload?.data.map(\n          (donation: {\n            donatedBy: string;\n            amount: number;\n            purpose: string;\n            isTransaction: boolean;\n            engagedAmount: number;\n          }) => {\n            return {\n              donatedBy: donation.donatedBy,\n              donatedAmount: donation.amount,\n              receivedAmount: Math.floor(REFILL_FRACTION * donation.amount),\n              purpose: donation.purpose,\n              isTransaction: donation.isTransaction,\n              engagedAmount: donation.isTransaction ? donation.engagedAmount : 0,\n            };\n          },\n        );\n        setAllDonations(fetchedDonations);\n        setActiveDonations(fetchedDonations.slice(0, ELEMENTS_PER_PAGE));\n      }\n    });\n  };\n\n  const updateDonations = (currentPage: number) => {\n    const start = (currentPage - 1) * ELEMENTS_PER_PAGE;\n    const end = start + ELEMENTS_PER_PAGE;\n    setActiveDonations(allDonations.slice(start, end));\n  };\n\n  useEffect(() => {\n    getAllDonations();\n  }, []);\n\n  useEffect(() => {\n    if (value) {\n      const filtered = allDonations?.filter((don: any) =>\n        String(don?.amount)?.toLowerCase().includes(value.toLowerCase()),\n      );\n      setAllDonations(filtered);\n    } else {\n      getAllDonations();\n    }\n  }, [value]);\n\n  useEffect(() => {\n    const fetchBalance = async () => {\n      try {\n        const response = await fetch(endpoint + '/donations/vallet-pay-balance');\n        const result = await response.json();\n        setBalance(result.balance);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    // Fetch data initially\n    fetchBalance();\n\n    // Fetch data every minute\n    const intervalId = setInterval(fetchBalance, 60000); // 60000 milliseconds = 1 minute\n\n    // Cleanup interval on component unmount\n    return () => clearInterval(intervalId);\n  }, []);\n\n  return (\n    <AdminLayout\n      title='Donations'\n      showBack\n      actionText='Donate'\n      onClick={() => navigate(paths.DONATIONS)}\n      searchValue={value}\n      onChange={(e) => setValue(e.target.value)}\n    >\n      <DonationTable donations={activeDonations} allDonations={allDonations} />\n\n      <div\n        style={{\n          margin: '30px 0',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <div>\n          <h1>Current balance in wallet: {balance} FCFA</h1>\n        </div>\n        <div>\n          {allDonations && <Pagination\n            totalPages={Math.ceil(allDonations.length / ELEMENTS_PER_PAGE)}\n            onPageChange={updateDonations}\n          />}\n        </div>\n      </div>\n      <KanbanLoading kanbanLoading={loading}>\n        <Spinner size='18px' />\n      </KanbanLoading>\n    </AdminLayout>\n  );\n};\n\nexport default Donations;\n"],"names":["_ref","kanbanLoading","children","contentStyle","containerStyle","_jsx","_Fragment","className","classes","style","donations","allDonations","_jsxs","styles","width","map","donation","index","isTransaction","borderBottom","color","donatedBy","concat","donatedAmount","receivedAmount","engagedAmount","purpose","reduce","total","totalPages","onPageChange","currentPage","setCurrentPage","useState","onClick","goToPreviousPage","prevPage","goToNextPage","Donations","loading","useAppSelector","state","loader","setAllDonations","data","activeDonations","setActiveDonations","page","setPage","value","setValue","balance","setBalance","dispatch","useAppDispatch","navigate","useNavigate","getAllDonations","getDonationsAction","then","res","payload","fetchedDonations","amount","Math","floor","slice","useEffect","filtered","filter","don","_String","String","toLowerCase","includes","fetchBalance","async","response","fetch","endpoint","result","json","error","console","intervalId","setInterval","clearInterval","AdminLayout","title","showBack","actionText","paths","DONATIONS","searchValue","onChange","e","target","DonationTable","margin","display","flexDirection","justifyContent","alignItems","Pagination","ceil","length","start","end","KanbanLoading","Spinner","size"],"sourceRoot":""}