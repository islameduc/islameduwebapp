"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[7966],{1792:(t,e,n)=>{n.d(e,{Z:()=>i});n(2791);const s="KanbanLoading_container__5QdVb",a="KanbanLoading_content__fi5xO";var o=n(184);const i=t=>{let{kanbanLoading:e,children:n,contentStyle:i,containerStyle:d}=t;return(0,o.jsx)(o.Fragment,{children:e&&(0,o.jsx)("div",{className:s,style:d,children:(0,o.jsx)("div",{className:a,style:i,children:n})})})}},2478:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var s=n(2791),a=n(1648),o=n(1305),i=n(1792),d=n(1328);const l="donation-table_table__AhxEn";var c=n(184);const r=t=>{let{donations:e,allDonations:n}=t;return(0,c.jsxs)("table",{className:l,children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:{width:"15%"},children:"Donated By"}),(0,c.jsx)("th",{style:{width:"15%"},children:"Donated Amount"}),(0,c.jsx)("th",{style:{width:"15%"},children:"Authorized Amount"}),(0,c.jsx)("th",{style:{width:"15%"},children:"Engaged Amount"}),(0,c.jsx)("th",{style:{width:"40%"},children:"Purpose"})]})}),(0,c.jsxs)("tbody",{children:[e&&e.map(((t,e)=>(0,c.jsxs)("tr",{style:t.isTransaction?{borderBottom:"1px solid #ccc",color:"red"}:{borderBottom:"1px solid #ccc"},children:[(0,c.jsx)("td",{style:{width:"15%"},children:t.donatedBy}),(0,c.jsx)("td",{style:{width:"15%"},children:t.isTransaction?"":"".concat(t.donatedAmount," FCFA")}),(0,c.jsx)("td",{style:{width:"15%"},children:t.isTransaction?"":"".concat(t.receivedAmount," FCFA")}),(0,c.jsx)("td",{style:{width:"15%"},children:t.isTransaction?"".concat(t.engagedAmount," FCFA"):""}),(0,c.jsx)("td",{style:{width:"40%"},children:t.purpose})]},e))),(0,c.jsxs)("tr",{style:{borderBottom:"1px solid #ccc"},children:[(0,c.jsx)("td",{}),(0,c.jsx)("td",{}),(0,c.jsx)("td",{}),(0,c.jsx)("td",{})]}),(0,c.jsxs)("tr",{style:{borderBottom:"1px solid #ccc"},children:[(0,c.jsx)("td",{style:{width:"15%"},children:"Total"}),(0,c.jsxs)("td",{style:{width:"15%"},children:[n&&n.reduce(((t,e)=>t+e.donatedAmount),0)," ","FCFA"]}),(0,c.jsxs)("td",{style:{width:"15%"},children:[n&&n.reduce(((t,e)=>t+e.receivedAmount),0)," ","FCFA"]}),(0,c.jsxs)("td",{style:{width:"15%"},children:[n&&n.reduce(((t,e)=>t+e.engagedAmount),0)," ","FCFA"]}),(0,c.jsx)("td",{style:{width:"40%"}})]})]})]})};var h=n(2463),u=n(1975),x=n(7689),j=n(8907);const g="pagination_paginationContainer__cwrdh",y="pagination_paginationButton__9Nk9a",m="pagination_paginationText__aVVMh",v=t=>{let{totalPages:e,onPageChange:n}=t;const[a,o]=(0,s.useState)(1);return(0,c.jsxs)("div",{className:g,children:[a>1&&(0,c.jsx)("button",{onClick:()=>{a>1&&(o((t=>t-1)),n(a-1))},className:y,children:"Previous"}),(0,c.jsxs)("span",{className:m,children:["Page ",a," of ",e]}),a<e&&(0,c.jsx)("button",{onClick:()=>{a<e&&(o((t=>t+1)),n(a+1))},className:y,children:"Next"})]})},p=()=>{const{loading:t}=(0,o.CG)((t=>t.loader)),{donations:e}=(0,o.CG)((t=>t.donations)),[n,l]=(0,s.useState)(null===e||void 0===e?void 0:e.data),[g,y]=(0,s.useState)(),[m,p]=(0,s.useState)(1),[w,A]=(0,s.useState)(""),[C,b]=(0,s.useState)(0),f=(0,o.TL)(),_=(0,x.s0)(),F=()=>{f((0,h.al)()).then((t=>{const{payload:e}=t;if(e){const t=null===e||void 0===e?void 0:e.data.map((t=>({donatedBy:t.donatedBy,donatedAmount:t.amount,receivedAmount:Math.floor(.9615384615384616*t.amount),purpose:t.purpose,isTransaction:t.isTransaction,engagedAmount:t.isTransaction?t.engagedAmount:0})));l(t),y(t.slice(0,10))}}))};return(0,s.useEffect)((()=>{F()}),[]),(0,s.useEffect)((()=>{if(w){const t=null===n||void 0===n?void 0:n.filter((t=>{var e;return null===(e=String(null===t||void 0===t?void 0:t.amount))||void 0===e?void 0:e.toLowerCase().includes(w.toLowerCase())}));l(t)}else F()}),[w]),(0,s.useEffect)((()=>{const t=async()=>{try{const t=await fetch(j.FP+"/donations/vallet-pay-balance"),e=await t.json();b(e.balance)}catch(t){console.error("Error fetching data:",t)}};t();const e=setInterval(t,6e4);return()=>clearInterval(e)}),[]),(0,c.jsxs)(a.Z,{title:"Donations",showBack:!0,actionText:"Donate",onClick:()=>_(u.Hb.DONATIONS),searchValue:w,onChange:t=>A(t.target.value),children:[(0,c.jsx)(r,{donations:g,allDonations:n}),(0,c.jsxs)("div",{style:{margin:"30px 0",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h1",{children:["Current balance in wallet: ",C," FCFA"]})}),(0,c.jsx)("div",{children:n&&(0,c.jsx)(v,{totalPages:Math.ceil(n.length/10),onPageChange:t=>{const e=10*(t-1),s=e+10;y(n.slice(e,s))}})})]}),(0,c.jsx)(i.Z,{kanbanLoading:t,children:(0,c.jsx)(d.Z,{size:"18px"})})]})}},830:()=>{}}]);
//# sourceMappingURL=7966.98916fc5.chunk.js.map