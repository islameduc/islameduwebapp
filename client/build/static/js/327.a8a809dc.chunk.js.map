{"version":3,"file":"static/js/327.a8a809dc.chunk.js","mappings":"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","sources":["webpack://client/./src/pages/admin/editor-page/editor-page.module.css?4361","pages/admin/editor-page/EditorPage.page.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"editor-page_container__7BrCe\",\"header\":\"editor-page_header__tTiVg\",\"section\":\"editor-page_section__QOOZ2\",\"saveButton\":\"editor-page_saveButton__XXoTP\"};","import React, { useState, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport axiosInstance from '../../../api/axiosConfig';\nimport { toast } from 'react-toastify';\nimport { useNavigate } from 'react-router-dom';\nimport { useAppSelector, useAppDispatch } from '../../../store';\nimport 'react-quill/dist/quill.snow.css';\nimport styles from './editor-page.module.css';\nimport { backendUrls } from '../../../api/urls';\nimport { paths } from '../../../routers/paths';\nimport NavBar from '../../../components/shared/navbar/NavBar';\nimport Footer from '../../../components/shared/footer/Footer';\n\ninterface Detail {\n    _id: string;\n    title: string;\n    content: string;\n}\n\nexport const getDetailsAction = createAsyncThunk('details/get-details', async (args, thunkAPI) => {\n    const { rejectWithValue } = thunkAPI;\n    try {\n        const res = await axiosInstance.get(backendUrls.users.ABOUT_US);\n        return res?.data?.result;\n    } catch (error: any) {\n        if (error.response && error.response.data) {\n            return rejectWithValue(error.response.data);\n        } else {\n            return rejectWithValue(error);\n        }\n    }\n});\n\nconst EditorPage = () => {\n    const { user } = useAppSelector((state) => state.auth);\n    const [vision, setVision] = useState('');\n    const [mission, setMission] = useState('');\n    const [whoWeAre, setWhoWeAre] = useState('');\n    const [whatWeDo, setWhatWeDo] = useState('');\n    const [details, setDetails] = useState<Detail[]>([])\n\n    const navigate = useNavigate();\n    const dispatch = useAppDispatch();\n\n    const handleSave = async () => {\n        const formData = new FormData();\n        formData.append('mission', mission);\n        formData.append('whatWeDo', whatWeDo);\n        formData.append('vision', vision);\n        formData.append('whoWeAre', whoWeAre);\n\n        try {\n            const response = await fetch(backendUrls.users.ABOUT_US, {\n                method: 'PATCH',\n                body: formData,\n                headers: {\n                    'Authorization': `Bearer ${user?.accessToken}`\n                },\n            });\n\n            if (response.ok) {\n                toast.success('Update successful')\n                navigate(paths.AboutUs);\n            } else {\n                console.error('Failed to update about us');\n            }\n        } catch (error) {\n            console.error('Error:', error);\n        }\n    };\n\n    const fetchDetails = () => {\n        dispatch(getDetailsAction()).then((res: any) => {\n            const { payload } = res;\n            if (payload) {\n                const fetchedDetails = payload;\n                console.log(fetchedDetails);\n                setDetails(fetchedDetails)\n            }\n        });\n    };\n\n    const getDetailByTitle = (title: string) => {\n        return details.find(detail => detail.title === title);\n    };\n\n    useEffect(() => {\n        fetchDetails();\n    }, []);\n\n    useEffect(() => {\n        setMission(getDetailByTitle('mission')?.content || '')\n        setVision(getDetailByTitle('vision')?.content || '')\n        setWhatWeDo(getDetailByTitle('whatWeDo')?.content || '')\n        setWhoWeAre(getDetailByTitle('whoWeAre')?.content || '')\n    }, [details]);\n\n    return (\n        <div>\n            <NavBar />\n            <div className={styles.container}>\n                <header className={styles.header}>\n                    <h1>Edit About Us Content</h1>\n                </header>\n\n                <section className={styles.section}>\n                    <h2>Vision</h2>\n                    <ReactQuill value={vision} onChange={setVision} />\n                </section>\n\n                <section className={styles.section}>\n                    <h2>Mission</h2>\n                    <ReactQuill value={mission} onChange={setMission} />\n                </section>\n\n                <section className={styles.section}>\n                    <h2>Who We Are</h2>\n                    <ReactQuill value={whoWeAre} onChange={setWhoWeAre} />\n                </section>\n\n                <section className={styles.section}>\n                    <h2>What We Do</h2>\n                    <ReactQuill value={whatWeDo} onChange={setWhatWeDo} />\n                </section>\n\n                <button className={styles.saveButton} onClick={handleSave}>Save</button>\n            </div>\n            <Footer />\n        </div>\n    );\n};\n\nexport default EditorPage;\n"],"names":["getDetailsAction","createAsyncThunk","async","args","thunkAPI","rejectWithValue","_res$data","res","axiosInstance","get","backendUrls","users","ABOUT_US","data","result","error","response","EditorPage","user","useAppSelector","state","auth","vision","setVision","useState","mission","setMission","whoWeAre","setWhoWeAre","whatWeDo","setWhatWeDo","details","setDetails","navigate","useNavigate","dispatch","useAppDispatch","getDetailByTitle","title","find","detail","useEffect","then","payload","fetchedDetails","console","log","_getDetailByTitle","_getDetailByTitle2","_getDetailByTitle3","_getDetailByTitle4","content","_jsxs","children","_jsx","NavBar","className","styles","ReactQuill","value","onChange","onClick","formData","FormData","append","fetch","method","body","headers","concat","accessToken","ok","toast","success","paths","AboutUs","Footer"],"sourceRoot":""}