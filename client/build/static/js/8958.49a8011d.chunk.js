"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[8958],{1792:(e,t,a)=>{a.d(t,{Z:()=>l});a(2791);const o="KanbanLoading_container__5QdVb",s="KanbanLoading_content__fi5xO";var n=a(184);const l=e=>{let{kanbanLoading:t,children:a,contentStyle:l,containerStyle:i}=e;return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)("div",{className:o,style:i,children:(0,n.jsx)("div",{className:s,style:l,children:a})})})}},6177:(e,t,a)=>{a.d(t,{Z:()=>l});a(2791);var o=a(4963);const s="DeleteModal_container__fLKYW";var n=a(184);const l=e=>{let{onDelete:t,onCancel:a,loading:l}=e;return(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)("span",{style:{fontSize:"12px"},children:"Are you sure you want to Delete?"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",margin:"15px 0 0"},children:[(0,n.jsx)(o.Z,{text:"Yes",onClick:t,color:"red",border:"1px solid red",bgColor:"",width:"100%",margin:"0 10px 0 0",loading:l,spinnerSize:"16px",fillColor:"red"}),(0,n.jsx)(o.Z,{text:"Cancel",onClick:a,width:"100%"})]})]})}},741:(e,t,a)=>{a.d(t,{Z:()=>c});a(2791);const o="blog-post-card_postContainer__Uy1W6",s="blog-post-card_title__R9Xth",n="blog-post-card_category__Oy3mB",l="blog-post-card_image__f0QWi",i="blog-post-card_content__f1B5C";var r=a(8835),d=a(184);const c=e=>{var t;let{post:a}=e;return(0,d.jsxs)("div",{className:o,children:[(0,d.jsx)("h1",{className:s,children:null===a||void 0===a?void 0:a.title}),(0,d.jsxs)("h2",{className:n,children:["Category: ",null===a||void 0===a?void 0:a.category]}),(null===a||void 0===a?void 0:a.image)&&(0,d.jsx)("img",{src:(null===(t=a.image)||void 0===t?void 0:t.httpPath)||r,alt:a.title,className:l,crossOrigin:"anonymous"}),(0,d.jsx)("div",{className:i,dangerouslySetInnerHTML:{__html:(null===a||void 0===a?void 0:a.content)||""}})]})}},2099:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var o=a(2791),s=a(1648),n=a(1305),l=a(1975),i=a(7689),r=a(9085),d=a(7299),c=a(5648),u=a(741),m=a(6770),p=a.n(m);a(6009);const g={modalOverlay:"add-post-modal_modalOverlay__qnqta",modalContent:"add-post-modal_modalContent__hv+wX",closeButton:"add-post-modal_closeButton__TkuFq",formGroup:"add-post-modal_formGroup__1QdIV",imagePreviewContainer:"add-post-modal_imagePreviewContainer__rt+6c",imagePreview:"add-post-modal_imagePreview__VGsyr",submitButtonContainer:"add-post-modal_submitButtonContainer__6E-xn",submitButton:"add-post-modal_submitButton__kqZE8",categoryName:"add-post-modal_categoryName__EIGPH",title:"add-post-modal_title__g2wNy",label:"add-post-modal_label__GclLB"};var h=a(9656),v=a(184);const _=e=>{let{postId:t,postTitle:a,postContent:s,postImagePreview:n,postCategoryId:l,isOpen:i,onClose:r,onSubmit:d,token:c,categories:u}=e;const[m,_]=(0,o.useState)(a),[y,x]=(0,o.useState)(s),[j,f]=(0,o.useState)(l),[b,C]=(0,o.useState)(null),[S,T]=(0,o.useState)(n);(0,o.useEffect)((()=>{i&&(_(a),x(s),C(null),T(n),f(l))}),[i,a,s,n,l]);return i?(0,v.jsx)("div",{className:g.modalOverlay,children:(0,v.jsxs)("div",{className:g.modalContent,children:[(0,v.jsx)("button",{className:g.closeButton,onClick:r,children:"\xd7"}),(0,v.jsx)("h2",{className:g.title,children:"Update Post"}),(0,v.jsxs)("div",{className:g.formGroup,children:[(0,v.jsx)("label",{htmlFor:"category",className:g.label,children:"Category"}),(0,v.jsx)("select",{id:"category",value:j,onChange:e=>f(e.target.value),className:g.select,children:u.map((e=>(0,v.jsx)("option",{value:e._id,children:e.name},e._id)))})]}),(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;a.append("title",m),a.append("content",y),a.append("categoryId",j),b&&a.append("postImage",b);try{(await fetch(h.F.posts.UPDATE_POST(t),{method:"PATCH",body:a,headers:{Authorization:"Bearer ".concat(c)}})).ok?(d(),r()):console.error("Failed to update post")}catch(o){console.error("Error:",o)}},encType:"multipart/form-data",children:[(0,v.jsxs)("div",{className:g.formGroup,children:[(0,v.jsx)("label",{htmlFor:"title",className:g.label,children:"Title"}),(0,v.jsx)("input",{type:"text",id:"title",value:m,onChange:e=>_(e.target.value),required:!0})]}),(0,v.jsxs)("div",{className:g.formGroup,children:[(0,v.jsx)("label",{htmlFor:"content",className:g.label,children:"Content"}),(0,v.jsx)(p(),{value:y,onChange:x,theme:"snow",modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]]}})]}),(0,v.jsxs)("div",{className:g.formGroup,children:[(0,v.jsx)("label",{htmlFor:"image",className:g.label,children:"Image"}),(0,v.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:e=>{if(e.target.files){const t=e.target.files[0];C(t);const a=new FileReader;a.onloadend=()=>{T(a.result)},a.readAsDataURL(t)}}})]}),(0,v.jsx)("div",{className:g.imagePreviewContainer,children:S&&(0,v.jsx)("img",{src:S,alt:"Preview",className:g.imagePreview,crossOrigin:"anonymous"})}),(0,v.jsx)("div",{className:g.submitButtonContainer,children:(0,v.jsx)("button",{type:"submit",className:g.submitButton,children:"Update Post"})})]})]})}):null};var y=a(1792),x=a(1328),j=a(6177);const f=()=>{const{user:e}=(0,n.CG)((e=>e.auth)),t=(0,o.useRef)(!0),a=(0,n.TL)(),m=(0,i.s0)(),[p,g]=(0,o.useState)([]),[f,b]=(0,o.useState)(!1),[C,S]=(0,o.useState)(!1),[T,N]=(0,o.useState)([]),[w,E]=(0,o.useState)(!1),[k,A]=(0,o.useState)(!1),[P,D]=(0,o.useState)(""),[O,B]=(0,o.useState)(""),[F,G]=(0,o.useState)(""),[Z,I]=(0,o.useState)(""),{id:L}=(0,i.UO)(),V={id:L,token:null===e||void 0===e?void 0:e.accessToken};(0,o.useEffect)((()=>{t.current&&(t.current=!1,E(!0),z())}),[L]);const z=()=>{a((0,d.LS)(V)).then((e=>{if(null!==e&&void 0!==e&&e.payload){const t=null===e||void 0===e?void 0:e.payload;g(t),D(t.title),B(t.content),G(t.image?t.image.httpPath:null),I(t.categoryId)}E(!1)}))};(0,o.useEffect)((()=>{a((0,c.T2)()).then((e=>{const{payload:t}=e;t&&N(t)}))}),[]);const R=async()=>{try{(await fetch(h.F.posts.DELETE_POST(L),{method:"DELETE",headers:{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.accessToken)}})).ok?(r.Am.success("Post deleted successfully"),m(l.Hb.ADMIN.POSTS)):(r.Am.error("Post deletion unsuccessful"),console.error("Failed to delete post"))}catch(t){console.error("Error:",t)}};return(0,v.jsxs)(s.Z,{title:null===p||void 0===p?void 0:p.title,padding:"50px 20px 0",actionText:"Edit Post",onClick:()=>{S(!0)},onDeleteProject:R,deleteText:"Delete Post",showDelete:!0,children:[(0,v.jsx)(u.Z,{post:p}),(0,v.jsx)(_,{postId:L,postTitle:P,postContent:O,postImagePreview:F,postCategoryId:Z,isOpen:C,onClose:()=>{S(!1)},onSubmit:()=>{r.Am.success("Post updated successfully"),z()},token:null===e||void 0===e?void 0:e.accessToken,categories:T}),(0,v.jsx)(y.Z,{kanbanLoading:w,children:(0,v.jsx)(x.Z,{size:"20px"})}),(0,v.jsx)(y.Z,{kanbanLoading:k,children:(0,v.jsx)(j.Z,{onDelete:R,onCancel:()=>A(!1),loading:f})})]})}},5648:(e,t,a)=>{a.d(t,{T2:()=>r});var o=a(6382),s=a(9656),n=a(4680),l=a(9085),i=a(460);(0,o.hg)("categories/add-category",(async(e,t)=>{let{rejectWithValue:a,dispatch:o}=t;o((0,n.Av)());try{var l;const t=await i.Z.post(s.F.categories.ADD_CATEGORY,e.formData,{headers:{Authorization:"Bearer ".concat(e.token)}});return null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message}catch(r){return a(r)}finally{o((0,n.Vg)())}}));const r=(0,o.hg)("categories/categories",(async(e,t)=>{const{rejectWithValue:a,dispatch:o}=t;o((0,n.Av)());try{var l;const e=await i.Z.get(s.F.categories.GET_CATEGORIES);return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.result}catch(r){return null!==r&&void 0!==r&&r.message?a(null===r||void 0===r?void 0:r.message):a(r)}finally{o((0,n.Vg)())}}));(0,o.hg)("categories/category-posts",(async(e,t)=>{const{rejectWithValue:a,dispatch:o}=t;o((0,n.Av)());try{const t=await i.Z.get(s.F.categories.GET_CATEGORY_POSTS(null===e||void 0===e?void 0:e.id));return null===t||void 0===t?void 0:t.data}catch(l){return a(l)}finally{o((0,n.Vg)())}})),(0,o.hg)("categories/update-category",(async(e,t)=>{const{rejectWithValue:a,dispatch:o}=t;o((0,n.Av)());try{var r;const t=await i.Z.patch(s.F.categories.UPDATE_CATEGORY(null===e||void 0===e?void 0:e.id),e.content,{headers:{Authorization:"Bearer ".concat(e.token)}});return l.Am.success("Category Updated!"),null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.result}catch(d){return d.response&&d.response.data?a(d.response.data):a(d)}finally{o((0,n.Vg)())}})),(0,o.hg)("categories/delete-category",(async(e,t)=>{const{rejectWithValue:a,dispatch:o}=t;o((0,n.Av)());try{var r;const t=await i.Z.delete(s.F.categories.DELETE_CATEGORY(null===e||void 0===e?void 0:e.id),{headers:{Authorization:"Bearer ".concat(e.token)}});return l.Am.success("Category Deleted!"),null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.result}catch(d){return d.response&&d.response.data?a(d.response.data):a(d)}finally{o((0,n.Vg)())}}))},830:()=>{},8835:(e,t,a)=>{e.exports=a.p+"static/media/default_post_image.3d073738c1ce7f74db91.jpeg"}}]);
//# sourceMappingURL=8958.49a8011d.chunk.js.map